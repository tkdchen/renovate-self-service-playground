{
  "$schema": "https://docs.renovatebot.com/renovate-schema.json",
  "extends": [
    "config:recommended"
  ],

  "tekton": {
    "enabled": true,
    "fileMatch": ["./*.yaml"],
    "postUpgradeTasks": {
      "commands": [
        "cat {{{ toJSON upgrades }}}"
      ],
      "executionMode": "branch",
      "dataFileTemplate": "[{{#each upgrades}}{\"depName\": \"{{{depName}}}\", \"currentValue\": \"{{{currentValue}}}\", \"currentDigest\": \"{{{currentDigest}}}\", \"newValue\": \"{{{newValue}}}\", \"newDigest\": \"{{{newDigest}}}\", \"packageFile\": \"{{{packageFile}}}\", \"parentDir\": \"{{{parentDir}}}\", \"depTypes\": [{{#each depTypes}}\"{{{this}}}\"{{#unless @last}},{{\/unless}}{{\/each}}]}{{#unless @last}},{{\/unless}}{{\/each}}]"
    }
  },

  "pip_requirements": {
    "enabled": false
  },
  "pip_setup": {
    "enabled": false
  },
  "pip-compile": {
    "enabled": false,
    "managerFilePatterns": [
      "requirements.txt"
    ]
  },

  "packageRules": [
    {
      "matchDatasources": ["pypi"],
      "groupName": "Python package updates"
    },

    {
      "groupName": "python deps for tests",
      "description": "Group Python dependencies included for running tests",
      "matchFileNames": [
        "apps/sbom-scripts/**",
        "apps/source-build/**",
        "apps/update-infra/**"
      ]
    }
  ]
}
